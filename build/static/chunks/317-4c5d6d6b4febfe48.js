"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[317],{6540:function(e,t,i){i.d(t,{C:function(){return s},T:function(){return r}});var n=i(9473);let r=()=>(0,n.I0)(),s=n.v9},9317:function(e,t,i){i.d(t,{Z:function(){return I}});var n=i(5893),r=i(1233),s=i(9008),o=i.n(s),l=i(1163),c=i(7294),a=i(7357),d=i(5582),h=i(5861),x=i(1664),p=i.n(x),u=i(8624),f=i(6200);function j(){let e=(0,u.g)();return(0,n.jsx)(a.Z,{sx:{display:"flex",flexDirection:"column",paddingTop:10},children:(0,n.jsx)(a.Z,{component:"footer",sx:{height:100,py:4.5,px:2,mt:"auto",backgroundColor:e=>"light"===e.palette.mode?e.palette.grey[200]:e.palette.grey[800]},children:(0,n.jsx)(d.Z,{maxWidth:"lg",children:(0,n.jsxs)(p(),{passHref:!0,href:"/",style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(f.Z,{fontSize:"large",sx:{color:e.palette.grey[400],mr:.5}}),(0,n.jsx)(h.Z,{variant:"h6",sx:{fontWeight:500,color:e.palette.grey[400]},children:"localShop"})]})})})})}var g=i(5573),Z=i(432),v=i(5500),m=i(9661),b=i(6540),y=i(7502),w=i(3321),C=i(6545),k=i(6242),S=i(8948);function W(e){let{isLoggedIn:t}=e,i=(0,u.g)(),s=(0,l.useRouter)(),o=(0,b.T)(),[x,j]=(0,c.useState)(!1),[W,I]=(0,c.useState)(!1),H=(0,b.C)(C.KY),z=(0,b.C)(S.jq),L=z.products.map(e=>{var t,i,s,o;return(0,n.jsxs)(r.Z,{direction:"row",pt:1,children:[(0,n.jsx)(r.Z,{spacing:.25,children:(0,n.jsxs)(h.Z,{variant:"h6",children:[null===(i=e.attributes)||void 0===i?void 0:null===(t=i.price)||void 0===t?void 0:t.toFixed(2)," Eur"]})}),(0,n.jsx)(p(),{style:{marginLeft:"auto",alignSelf:"center",fontWeight:600},passHref:!0,href:"/products/".concat(null===(s=e.attributes)||void 0===s?void 0:s.slug),children:(0,n.jsxs)(h.Z,{variant:"caption",children:[" ",null===(o=e.attributes)||void 0===o?void 0:o.title]})})]},e.id)}),E=H.items.map(e=>{var t,i,s;return(0,n.jsxs)(r.Z,{width:"100%",direction:"row",justifyContent:"space-between",children:[(0,n.jsx)(a.Z,{children:(0,n.jsx)(p(),{style:{marginLeft:"auto",alignSelf:"center",fontWeight:600},passHref:!0,href:"/products/".concat(null===(t=e.product.attributes)||void 0===t?void 0:t.slug),children:(0,n.jsxs)(h.Z,{variant:"subtitle1",children:[" ",null===(i=e.product.attributes)||void 0===i?void 0:i.title]})})}),(0,n.jsx)(a.Z,{children:(0,n.jsxs)(h.Z,{variant:"caption",children:[" ",e.qty]})}),(0,n.jsx)(a.Z,{children:(0,n.jsx)(h.Z,{variant:"subtitle1",children:null===(s=e.product.attributes)||void 0===s?void 0:s.price})})]},e.id)}),T=H.items.reduce((e,t)=>e+t.product.attributes.price*t.qty,0);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{maxWidth:!1,sx:{zIndex:99,position:"fixed",top:0,alignItems:"center",width:"100%",backgroundColor:i.palette.background.default},children:(0,n.jsxs)(r.Z,{direction:"row",p:2,sx:{px:{lg:4,md:0,sm:1,xs:0},maxWidth:"lg",mx:"auto",alignItems:"center",width:"100%",justifyContent:"space-between"},children:[(0,n.jsxs)(p(),{passHref:!0,href:"/",style:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(m.Z,{sx:{bgcolor:"#fff",mr:1},children:(0,n.jsx)(f.Z,{fontSize:"large",sx:{color:i.palette.secondary.main}})}),(0,n.jsx)(h.Z,{variant:"h6",sx:{fontWeight:500,color:i.palette.grey[400]},children:"localShop"})]}),(0,n.jsxs)(r.Z,{direction:"row",spacing:4,alignItems:"center",children:[(0,n.jsx)(p(),{passHref:!0,href:"/products",children:(0,n.jsx)(h.Z,{color:i.palette.grey[400],children:"Products"})}),(0,n.jsx)(p(),{passHref:!0,href:"/contacts",children:(0,n.jsx)(h.Z,{color:i.palette.grey[400],children:"Contacts"})}),(0,n.jsxs)(r.Z,{direction:"row",spacing:1,children:[(null==L?void 0:L.length)>0&&(0,n.jsx)(m.Z,{sx:{bgcolor:"#fff"},onClick:()=>{I(!W)},children:(0,n.jsx)(Z.Z,{sx:{color:i.palette.secondary.main}})}),(0,n.jsx)(m.Z,{sx:{bgcolor:"#fff",cursor:"pointer"},onClick:()=>{j(!x)},children:(0,n.jsx)(v.Z,{sx:{color:i.palette.secondary.main}})}),t&&(0,n.jsx)(p(),{passHref:!0,href:"/account",children:(0,n.jsx)(m.Z,{sx:{bgcolor:"#fff"},children:(0,n.jsx)(g.Z,{sx:{color:i.palette.secondary.main}})})})]}),!t&&(0,n.jsx)(p(),{passHref:!0,href:"/login",children:(0,n.jsx)(w.Z,{variant:"contained",children:"Login"})}),t&&(0,n.jsx)(w.Z,{variant:"contained",onClick:()=>{o(y.kS),sessionStorage.removeItem("jwt"),s.push("/login")},children:"Log out"})]}),x&&(0,n.jsxs)(k.Z,{sx:{backgroundColor:"#fff",width:300,position:"fixed",zIndex:9,right:0,top:70,p:3},children:[(0,n.jsx)(h.Z,{variant:"h6",fontWeight:700,children:"Cart"}),(0,n.jsx)(r.Z,{spacing:1,py:3,children:E}),(0,n.jsx)(r.Z,{spacing:1,pb:2,sx:{borderTop:"1px solid black"},pt:1,children:(0,n.jsxs)(r.Z,{direction:"row",sx:{justifyContent:"space-between"},children:[(0,n.jsx)(h.Z,{variant:"subtitle1",fontWeight:500,children:"Cart total:"}),(0,n.jsx)(h.Z,{variant:"subtitle1",fontWeight:500,children:T})]})}),(0,n.jsx)(p(),{passHref:!0,href:"/checkout",children:(0,n.jsx)(w.Z,{variant:"contained",children:"Go to checkout"})})]}),W&&(0,n.jsxs)(k.Z,{sx:{backgroundColor:"#fff",width:300,position:"fixed",zIndex:9,right:0,top:70,p:3},children:[(0,n.jsx)(h.Z,{variant:"h6",fontWeight:700,children:"Wishlist"}),(0,n.jsx)(r.Z,{spacing:1,py:3,children:L}),(0,n.jsx)(p(),{passHref:!0,href:"/wishlist",children:(0,n.jsx)(w.Z,{variant:"contained",children:"See wishlist"})})]})]})}),(0,n.jsx)(a.Z,{sx:{height:70}})]})}var I=e=>{let{children:t}=e,i=(0,l.useRouter)(),[s,a]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{let e=sessionStorage.getItem("jwt");e&&a(!0),e||(a(!1),"/account"===i.pathname&&i.push("/login"))},[i]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o(),{children:[(0,n.jsx)("title",{children:"Create Next App"}),(0,n.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsxs)(r.Z,{sx:{height:"100%",position:"relative"},children:[(0,n.jsx)(W,{isLoggedIn:s}),(0,n.jsx)(r.Z,{minHeight:"calc(100vh - 265px)",sx:{pt:"60px",maxWidth:"100vw",overflow:"hidden"},children:t}),(0,n.jsx)(j,{})]})]})}}}]);